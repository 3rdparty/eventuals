load("@rules_cc//cc:defs.bzl", "cc_test")
load("//bazel:copts.bzl", "copts")

eventuals_base_sources = [
    "eventual.cc",
    "stream.cc",
    "lock.cc",
    "repeat.cc",
    "then.cc",
    "conditional.cc",
    "callback.cc",
    "static-thread-pool.cc",
    "task.cc",
    "closure.cc",
    # "parallel.cc",
    "iterate.cc",
    "collect.cc",
    "filter.cc",
    "take.cc",
    "range.cc",
    "let.cc",
    "stream-for-each.cc",
    "concurrent.cc",
]

eventuals_events_sources = [
    "timer.cc",
    "filesystem.cc",
    "event-loop-test.h",
    "dns-resolver.cc",
    "signal.cc",
]

eventuals_http_sources = [
    "http.cc",
]

cc_test(
    name = "eventuals",
    srcs = eventuals_base_sources + eventuals_events_sources + eventuals_http_sources,
    copts = copts(),
    deps = [
        "//:eventuals",
        "@com_github_google_googletest//:gtest_main",
    ],
)
